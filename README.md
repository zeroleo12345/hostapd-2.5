```
docker-compose auth bash
cd /app/third_party/hostapd-2.5-ctm/hostapd
```


## 容器内编译 libhostapd.so, loader, test_hostapd

``` bash
# 不需要 ./configure
make test=1
```


## 容器内编译正常的 hostapd

``` bash
make
```


## 容器内调试python core dump文件
```
apt-get update
apt-get install -y gdb

root@987c9d5da53d:/app# gdb /usr/local/bin/python -c core.1
GNU gdb (Debian 7.12-6) 7.12.0.20161007-git
Copyright (C) 2016 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu".
Type "show configuration" for configuration details.
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>.
Find the GDB manual and other documentation resources online at:
<http://www.gnu.org/software/gdb/documentation/>.
For help, type "help".
Type "apropos word" to search for commands related to "word"...
Reading symbols from /usr/local/bin/python...(no debugging symbols found)...done.

warning: core file may not match specified executable file.
[New LWP 1]
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
Core was generated by `python3 /app/src/processor/acct_processor.py'.
Program terminated with signal SIGSEGV, Segmentation fault.
#0  0x00007f340a7b33b9 in sk_free () from /usr/lib/x86_64-linux-gnu/libcrypto.so.1.0.2
(gdb) where
#0  0x00007f340a7b33b9 in sk_free () from /usr/lib/x86_64-linux-gnu/libcrypto.so.1.0.2
#1  0x00007f340ab27c88 in SSL_CTX_free () from /usr/lib/x86_64-linux-gnu/libssl.so.1.0.2
#2  0x00007f340afd7a6e in tls_deinit (ssl_ctx=0x564a5f5275c0) at ../src/crypto/tls_openssl.c:928
#3  0x00007f3412dfe038 in ffi_call_unix64 () from /usr/lib/x86_64-linux-gnu/libffi.so.6
#4  0x00007f3412dfda9a in ffi_call () from /usr/lib/x86_64-linux-gnu/libffi.so.6
#5  0x00007f341300dddd in ?? () from /usr/local/lib/python3.6/lib-dynload/_ctypes.cpython-36m-x86_64-linux-gnu.so
#6  0x00007f34130132bb in ?? () from /usr/local/lib/python3.6/lib-dynload/_ctypes.cpython-36m-x86_64-linux-gnu.so
#7  0x00007f3414e08a8e in _PyObject_FastCallDict () from /usr/local/lib/libpython3.6m.so.1.0
#8  0x00007f3414e7fb73 in ?? () from /usr/local/lib/libpython3.6m.so.1.0
#9  0x00007f3414e78dff in _PyEval_EvalFrameDefault () from /usr/local/lib/libpython3.6m.so.1.0
#10 0x00007f3414e7fd32 in ?? () from /usr/local/lib/libpython3.6m.so.1.0
#11 0x00007f3414e7fb0b in ?? () from /usr/local/lib/libpython3.6m.so.1.0
#12 0x00007f3414e78dff in _PyEval_EvalFrameDefault () from /usr/local/lib/libpython3.6m.so.1.0
#13 0x00007f3414e7fd32 in ?? () from /usr/local/lib/libpython3.6m.so.1.0
#14 0x00007f3414e7fb0b in ?? () from /usr/local/lib/libpython3.6m.so.1.0
#15 0x00007f3414e78dff in _PyEval_EvalFrameDefault () from /usr/local/lib/libpython3.6m.so.1.0
#16 0x00007f3414e80533 in ?? () from /usr/local/lib/libpython3.6m.so.1.0
#17 0x00007f3414e7fb0b in ?? () from /usr/local/lib/libpython3.6m.so.1.0
#18 0x00007f3414e78dff in _PyEval_EvalFrameDefault () from /usr/local/lib/libpython3.6m.so.1.0
#19 0x00007f3414e80533 in ?? () from /usr/local/lib/libpython3.6m.so.1.0
#20 0x00007f3414e7fb0b in ?? () from /usr/local/lib/libpython3.6m.so.1.0
#21 0x00007f3414e78dff in _PyEval_EvalFrameDefault () from /usr/local/lib/libpython3.6m.so.1.0
#22 0x00007f3414e78175 in PyEval_EvalCodeEx () from /usr/local/lib/libpython3.6m.so.1.0
#23 0x00007f3414e77eeb in PyEval_EvalCode () from /usr/local/lib/libpython3.6m.so.1.0
#24 0x00007f3414ef9eee in ?? () from /usr/local/lib/libpython3.6m.so.1.0
#25 0x00007f3414ef918d in PyRun_FileExFlags () from /usr/local/lib/libpython3.6m.so.1.0
#26 0x00007f3414ef8fa6 in PyRun_SimpleFileExFlags () from /usr/local/lib/libpython3.6m.so.1.0
#27 0x00007f3414eff3cc in Py_Main () from /usr/local/lib/libpython3.6m.so.1.0
#28 0x0000564a5cc80bdd in main ()
(gdb) quit
root@987c9d5da53d:/app# gdb /usr/local/bin/python -c core.1
```


## 编译参数
```
-g
该选项可以利用操作系统的“原生格式（native format）”生成调试
信息。GDB 可以直接利用这个信息，其它调试器也可以使用这个调试信息

-ggdb
使 GCC 为 GDB 生成专用的更为丰富的调试信息，但是，此时就不能用其
他的调试器来进行调试了 (如 ddx)

-g 和 -ggdb 也是分级别的

-g2
这是默认的级别，此时产生的调试信息包括扩展的符号表、行号、局部
或外部变量信息。

-g3
包含级别2中的所有调试信息，以及源代码中定义的宏
```

